<!DOCTYPE html>
<html>

    <head>
        {{headContent()}}
        <title>IRACE GUI - Reports</title>

        <!-- include Bootstrap js/css -->
        <script src="../resources/dependences/bootstrap/js/bootstrap.bundle.js"></script>
        <link rel="stylesheet" href="../resources/dependences/bootstrap/css/bootstrap.css">

        <!-- REQUIRED SCRIPTS -->

        <!-- jQuery -->
        <script src="../resources/dependences/AdminLTE-3.0.1/plugins/jquery/jquery.min.js"></script>
        <!-- Bootstrap 4 -->
        <script src="../resources/dependences/AdminLTE-3.0.1/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
        <!-- AdminLTE App -->
        <script src="../resources/dependences/AdminLTE-3.0.1/dist/js/adminlte.min.js"></script>
        <!-- Theme style -->
        <link rel="stylesheet" href="../resources/dependences/AdminLTE-3.0.1/dist/css/adminlte.min.css">
        <!-- Font Awesome Icons -->
        <link href="../resources/dependences/fontawesome/css/all.css" rel="stylesheet">

        <!-- include datatables css/js -->
        <link rel="stylesheet" type="text/css" href="../resources/dependences/datatable/media/css/jquery.dataTables.css">
        <script type="text/javascript" charset="utf8" src="../resources/dependences/datatable/media/js/jquery.dataTables.js"></script>

        <!-- include summernote css/js -->
        <link href="../resources/dependences/summernote/dist/summernote-lite.css" rel="stylesheet">
        <script src="../resources/dependences/summernote/dist/summernote-lite.js"></script>

        <!-- include sweetalert2 css/js -->
        <script src="../resources/dependences/sweetalert2/dist/sweetalert2.min.js"></script>
        <link rel="stylesheet" href="../resources/dependences/sweetalert2/dist/sweetalert2.min.css">

        <!-- include jsPDF js -->
        <script src="../resources/dependences/jsPDF/dist/jspdf.debug.js"></script>
        <script src="../resources/dependences/html2canvas/html2canvas-0.4.1.js"></script>
        <script src="../resources/dependences/jsPDF/plugins/jsPDF-AutoTable/dist/jspdf.plugin.autotable.js"></script>

        <!-- include selectize-->
        <script src="../resources/dependences/selectize/dist/js/selectize.js"></script>

        <!-- include customs js -->
        <script src="../resources/scripts/alerts.js" type="text/javascript"></script>
    </head>

    <body class="hold-transition sidebar-mini layout-fixed layout-navbar-fixed">
        <div class="wrapper">  
        <nav class="main-header navbar navbar-expand navbar-white navbar-light">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#"><i class="fa fa-bars"></i></a>
                </li>
            </ul>
            <ul class="navbar-nav ml-auto">
                <li class="dropdown" style="margin-right:10px;">
                    <a id="status" href="#" class="action-button" style="color: black;" onclick="loadSetup()">Setup</a>
                </li>
                <li class="dropdown" style="margin-right:10px;">
                    <a id="status" class="action-button" style="color: grey;">Runtime</a>
                </li>
                <li class="dropdown" style="margin-right:10px;">
                    <a id="status" class="action-button" style="color: green;">Reports</a>
                </li>
                <li class="dropdown">
                    <a id="status" class="action-button" style="color:green">
                    <i class="fa fa-circle"></i>
                    Finished
                    </a>
                </li>
            </ul>
        </nav>
      <!-- /.navbar -->
      <!-- Main Sidebar Container -->
        <aside class="main-sidebar sidebar-dark-primary elevation-4">
        <a class="brand-link">
            <span class="brand-text font-weight-light" style="color: white; font-size: 25px;">IRACE</span>
        </a>
    
        <!-- Sidebar -->
        <div class="sidebar">
        <br>
    
        <!-- Sidebar Menu -->
        <nav class="mt-2">
            <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu">
                <!-- Add icons to the links using the .nav-icon class
                   with font-awesome or any other icon font library -->
                <li class="nav-item has-treeview">
                    <a href="#" class="nav-link active">
                        <i class="nav-icon fas fa-tachometer-alt"></i>
                        <p>
                            Report Options
                            <i class="right fas fa-angle-left"></i>
                        </p>
                    </a>
                    <ul class="nav nav-treeview">
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="far fa-file-pdf"></i>
                                <button type="button" class="btn btn-link" data-toggle="modal" data-target="#preferencesPDF" style="color: white;">Save PDF</button>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="far fa-save"></i>
                                <button type="button" onclick="getAllCustomSections()" class="btn btn-link" style="color: white;">Save Report</button>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-file-upload"></i>
                                {{ loadReport }}
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="nav-item has-treeview menu-open">
                    <a href="#" class="nav-link active">
                        <i class="nav-icon fas fas fa-bars"></i>
                        <p>
                            Report Sections
                            <i class="right fas fa-angle-left"></i>
                        </p>
                    </a>
                    <ul class="nav nav-treeview">
                        <li class="nav-item">
                            <a href="#summary" class="nav-link">
                                <i class="fas fa-tasks"></i>
                                <p>Summary</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#candidates" class="nav-link">
                                <i class="fas fa-users"></i>
                                <p>Candidates</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#Performance" class="nav-link">
                                <i class="fas fa-tachometer-alt"></i>
                                <p>Performance</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#details" class="nav-link">
                                <i class="fas fa-info-circle"></i>
                                <p>Details</p>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="nav-item has-treeview">
                    <a href="#" class="nav-link active">
                        <i class="nav-icon fas fas fa-bars"></i>
                        <p>
                            User Sections
                            <i class="right fas fa-angle-left"></i>
                        </p>
                    </a>
                    <ul class="nav nav-treeview customsections">
                        <li class="nav-item">
                            <a class="nav-link" id="buttonCustomSections">
                                <button type="button" class="btn btn-outline-success btn-md btn-block" role="button" onclick="createNewSection()">New section</button>
                            </a>
                        </li>
                    </ul>
                </li>
                <br>
                <li class="nav-item">
                    <button type="button" class="btn btn-primary btn-sm btn-block" role="button" onclick="backToMainMenu()"><i class="fas fa-home"></i><p>Back to main menu</p></button>
                </li>
            </ul>
        </nav>
          <!-- /.sidebar-menu -->
        </div>
        <!-- /.sidebar -->
        </aside>
        <div class="content-wrapper">
        <br>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-12 overflow-auto" id="summary">
                    <div class="card">
                        <div class="card-header">
                            Summary
                            <button type="button" class="btn btn-outline-warning btn-sm" data-toggle="tooltip" data-placement="bottom" title="This section shows the summary of the execution of IRACE and shows the values of the variables of the scenario" style="float: right;"><i class="fas fa-info-circle"></i></button>
                        </div>
                        <div class="card=body">
                            <div class="container">
                                <div class="row">
                                    <div class="col">
                                        <table id="tablaSummary1">
                                            <tr>
                                                <th>IRACE version: </th>
                                                <td>{{ iraceResults$irace.version }}</td>
                                            </tr>
                                            <tr>
                                                <th>Number of candidate configurations: </th>
                                                <td>{{ nrow(iraceResults$allConfigurations) }}</td>
                                            </tr>
                                            <tr>
                                                <th>Number of target executions: </th>
                                                <td> {{ iraceResults$state$experimentsUsedSoFar }}</td>
                                            </tr>
                                            <tr>
                                                <th>Total time required: </th>
                                                <td>HH:MM:SS</td>
                                            </tr>
                                            <tr>
                                                <th>Elitist new instances: </th>
                                                <td>{{ iraceResults$scenario$elitistNewInstances }}</td>
                                            </tr>
                                            <tr>
                                                <th>Elitist limit: </th>
                                                <td>{{ iraceResults$scenario$elitistLimit }}</td>
                                            </tr>  
                                            <tr>
                                                <th>nbIterations: </th>
                                                <td id="numberOfIterations">{{ iraceResults$state$nbIterations }}</td>
                                            </tr>  
                                        </table>
                                    </div>
                                    <div class="col">
                                        <table id="tablaSummary2">
                                            <tr>
                                                <th>minNbSurvival: </th>
                                                <td>{{ iraceResults$state$minSurvival }}</td>
                                            </tr>
                                            <tr>
                                                <th>nbParameters: </th>
                                                <td>{{ iraceResults$parameters$nbParameters }}</td>
                                            </tr>
                                            <tr>
                                                <th>seed: </th>
                                                <td>{{ iraceResults$scenario$seed }}</td>
                                            </tr>
                                            <tr>
                                                <th>confidence level: </th>
                                                <td>{{ iraceResults$scenario$confidence }}</td>
                                            </tr>
                                            <tr>
                                                <th>budget: </th>
                                                <td>{{  iraceResults$scenario$budgetEstimation }}</td>
                                            </tr>  
                                            <tr>
                                                <th>mu: </th>
                                                <td>{{  iraceResults$scenario$mu }}</td>
                                            </tr>
                                            <tr>
                                                <th>deterministic: </th>
                                                <td>{{  iraceResults$scenario$deterministic }}</td>
                                            </tr>  
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header" id="bestConfiguration">
                            Best Configuration
                            <button type="button" class="btn btn-outline-warning btn-sm" data-toggle="tooltip" data-placement="bottom" title="This section shows the details of the best configuration obtained by IRACE. It shows the values of the params and the boxplot associated with the ID." style="float: right;"><i class="fas fa-info-circle"></i></button>
                        </div>
                        <div class="card=body">
                            <div class="container" style="overflow:auto; height:500px;">
                                <div class="row">
                                    <div class="col shiny-html-output">
                                        <br>
                                        {{ bestConfiguration }}
                                    </div>
                                    <div class="col">
                                        <br>
                                        <div class="input-group">
                                            <select class="custom-select section" id="bestConfigurationSectionSelect">
                                                <option selected disabled>Select a section to copy Boxplot</option>
                                            </select>
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-primary" type="button" onclick="copyContentIntoSection('bestConfigurationSectionSelect', 'boxPlotBestConfiguration', 'true')">Copy</button>
                                            </div>
                                        </div>
                                        {{ boxPlotBestConfiguration }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header" id="candidates">
                            Candidates
                            <button type="button" class="btn btn-outline-warning btn-sm" data-toggle="tooltip" data-placement="bottom" title="This section shows how the values ​​of the parameters are varying as the iteration is progressing. For it, it's generated parallel coordinates and frequency plots." style="float: right;"><i class="fas fa-info-circle"></i></button>
                        </div>
                        <div class="card=body overflow-auto">
                            <br>
                            <div class="container">
                                <div class="row">
                                    <div class="col">
                                        {{ sliderCandidates }}
                                        <br>
                                        <div class="input-group">
                                            <select class="custom-select section" id="candidatesParallelCoordinatesSectionSelect">
                                                <option selected disabled>Select a section to copy Parallel Coordinates</option>
                                            </select>
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-primary" type="button" onclick="copyContentIntoSection('candidatesParallelCoordinatesSectionSelect', 'parallelCoordinatesCandidates', 'true')">Copy</button>
                                            </div>
                                        </div>
                                        {{ parallelCoordinatesCandidates }}
                                    </div>
                                    <div class="col">
                                        <button type="button" class="btn btn-outline-danger btn-lg btn-block" data-toggle="modal" data-target="#parametersModal">
                                            Open parameters selection
                                        </button>
                                        <br>
                                        <div class="input-group">
                                            <select class="custom-select section" id="candidatesFrecuencySectionSelect">
                                                <option selected disabled>Select a section to copy Frequency Plot</option>
                                            </select>
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-primary" type="button" onclick="copyContentIntoSection('candidatesFrecuencySectionSelect', 'frecuencyCandidates', 'true')">Copy</button>
                                            </div>
                                        </div>
                                        {{ frecuencyCandidates }}
                                    </div>
                                </div>
                            </div>
                            <br>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header" id="Performance">
                            Performance
                            <button type="button" class="btn btn-outline-warning btn-sm" data-toggle="tooltip" data-placement="bottom" title="This section shows the quality of the configurations per iteration." style="float: right;"><i class="fas fa-info-circle"></i></button>
                        </div>
                        <div class="card=body" style="overflow:auto; height:900px;">
                            <br>
                            <div class="container">
                                <div class="row">
                                    <div class="col">
                                        {{ selectIterationPerformance }}
                                        <br>
                                        <div class="input-group">
                                            <select class="custom-select section" id="covergencePerformanceSectionSelect">
                                                <option selected disabled>Select a section to copy Convergence Plot</option>
                                            </select>
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-primary" type="button" onclick="copyContentIntoSection('covergencePerformanceSectionSelect', 'convergencePerformance', 'true')">Copy</button>
                                            </div>
                                        </div>
                                        {{ convergencePerformance }}
                                    </div>
                                    <div class="col">
                                        <br>
                                        <br>
                                        <br>
                                        <br>
                                        <div class="input-group">
                                            <select class="custom-select section" id="boxplotPerformanceSectionSelect">
                                                <option selected disabled>Select a section to copy Boxplot</option>
                                            </select>
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-primary" type="button" onclick="copyContentIntoSection('boxplotPerformanceSectionSelect', 'boxPlotPerformance', 'true')">Copy</button>
                                            </div>
                                        </div>
                                        {{ boxPlotPerformance }}
                                    </div>
                                </div>
                            </div>
                            <br>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-12 overflow-auto">
                    <div class="card">
                        <div class="card-header" id="details">
                            Details by iteration
                            <button type="button" class="btn btn-outline-warning btn-sm" data-toggle="tooltip" data-placement="bottom" title="This section shows the best-so-far configuration and the elite configurations per iteration. Further, this shows the parameters of each configuration with his respective values." style="float: right;"><i class="fas fa-info-circle"></i></button>
                        </div>
                        <div class="card=body" style="overflow:auto; height:850px;">
                            <br>
                            <div class="container">
                                <div class="row justify-content-center">
                                    {{ selectDetailsIteration }}
                                </div>
                                <div class="row">
                                    <div class="col shiny-html-output">
                                        {{ bestSoFarSelected }}
                                        <br>
                                        <div class="input-group">
                                            <select class="custom-select section" id="bestSoFarIterationSelect">
                                                <option selected disabled>Select a section to copy best-so-far configuration table</option>
                                            </select>
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-primary" type="button" onclick="copyTableIntoSection('bestSoFarIterationSelect', 'bestSoFarIteration', true)">Copy</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col shiny-html-output">
                                        {{ eliteConfigurationSelected }}
                                        <br>
                                        <div class="input-group">
                                            <select class="custom-select section" id="eliteConfigurationSelect">
                                                <option selected disabled>Select a section to copy elite configurations table</option>
                                            </select>
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-primary" type="button" onclick="copyTableIntoSection('eliteConfigurationSelect', 'bestSoFarConfigsIteration', false)">Copy</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
        </div>
        </div>
    </body>
    <!-- Modal Parametros Candidatos-->
    <div class="modal fade bd-example-modal-lg" id="parametersModal" tabindex="-1" role="dialog" aria-labelledby="parametersSelection" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Parameters Selection (Only afects Candidates section)</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    {{selectedParametersCandidates}}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Preferencias PDF-->
    <div class="modal fade bd-example-modal-lg" id="preferencesPDF" tabindex="-1" role="dialog" aria-labelledby="preferencesPDF" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">PDF Configuration</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-sm-9">
                                <b>Candidates</b>
                                <br>
                                By default, only adds the plots of the last two iterations.
                                <div class="row">
                                    <div class="col-8 col-sm-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="" id="allIterationCandidates">
                                            <label class="form-check-label" for="allIterationCandidates">
                                                Include all iterations
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-4 col-sm-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="" id="dontIncludeCandidates">
                                            <label class="form-check-label" for="dontIncludeCandidates">
                                                Do not include in the report
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <br>
                                <b>Performance</b>
                                <div class="row">
                                    <div class="col-8 col-sm-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="" id="allIterationsPerformance">
                                            <label class="form-check-label" for="allIterationsPerformance">
                                                Include all iterations
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-4 col-sm-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="" id="dontIncludePerformance">
                                            <label class="form-check-label" for="dontIncludePerformance">
                                                Do not include in the report
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <br>
                                <b>Details</b>
                                <br>
                                Only adds the best-so-far configuration of each iteration.
                                <div class="row">
                                    <div class="col-8 col-sm-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="" id="includeDetails">
                                            <label class="form-check-label" for="includeDetails">
                                                Include in the report
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-4 col-sm-6">
                                        <div class="form-check">
                                            <button type="button" class="btn btn-outline-primary" data-toggle="modal" data-target="#parametersDetailsPDF" id="buttonParametersPDF">Select Parameters</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="generatePDF" onclick="getOptionsPDF()">Export PDF</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Parametros PDF-->
    <div class="modal fade bd-example-modal-lg" id="parametersDetailsPDF" tabindex="-1" role="dialog" aria-labelledby="parametersDetailsPDF" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Parameters Selection (Only afects PDF Report)</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <select multiple id="selectParametersPDF">
                    </select>       
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</html>
<!-- include customs js -->
<script src="../resources/scripts/main.js" type="text/javascript"></script>
<script src="../resources/scripts/fileExport.js" type="text/javascript"></script>
<script src="../resources/scripts/pdfGen.js" type="text/javascript"></script>
