<!DOCTYPE html>
<html>

    <head>
        {{headContent()}}
        <title>IRACE GUI - Reports</title>

        <!-- include JQuery/Shiny/Bootstrap js/css -->
        <script src="shared/jquery.js" type="text/javascript"></script>
        <script src="shared/shiny.js" type="text/javascript"></script>
        <link rel="stylesheet" type="text/css" href="shared/shiny.css"/>
        <script src="../resources/dependences/bootstrap/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="../resources/dependences/bootstrap/css/bootstrap.css">

        <!-- include datatables css/js -->
        <link rel="stylesheet" type="text/css" href="../resources/dependences/datatable/media/css/jquery.dataTables.css">
        <script type="text/javascript" charset="utf8" src="../resources/dependences/datatable/media/js/jquery.dataTables.js"></script>

        <!-- include summernote css/js -->
        <link href="../resources/dependences/summernote/dist/summernote-lite.css" rel="stylesheet">
        <script src="../resources/dependences/summernote/dist/summernote-lite.js"></script>

        <!-- include sweetalert2 css/js -->
        <script src="../resources/dependences/sweetalert2/dist/sweetalert2.min.js"></script>
        <link rel="stylesheet" href="../resources/dependences/sweetalert2/dist/sweetalert2.min.css">

        <!-- include jsPDF js -->
        <script src="../resources/dependences/jsPDF/dist/jspdf.debug.js"></script>
        <script src="../resources/dependences/html2canvas/html2canvas-0.4.1.js"></script>
        <script src="../resources/dependences/jsPDF/plugins/jsPDF-AutoTable/dist/jspdf.plugin.autotable.js"></script>

        <!-- include customs js -->
        <script src="../resources/scripts/alerts.js" type="text/javascript"></script>
    </head>

    <body>
        <div class="wrapper">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="#" style="font-size: 55px;">IRACE</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarText">
                <ul class="navbar-nav mr-auto">
                <li class="nav-item" style="padding-left: 150px; font-size: 30px;">
                    <a class="nav-link" href="#">Setup</a>
                </li>
                <li class="nav-item" style="padding-left: 150px; font-size: 30px;">
                    <a class="nav-link" href="#">Runtime</a>
                </li>
                <li class="nav-item active" style="padding-left: 150px; font-size: 30px; color: green;">
                    <a class="nav-link" href="#">Reports<span class="sr-only">(current)</span></a>
                </li>
                </ul>
                <span class="navbar-text">
                    <div class="container">
                        <div class="row">
                            Status
                        </div>
                        <div class="row">
                            <br><img src="resources/images/finished.png" width="20" height="20" alt="Status: Finished"><br>
                        </div>
                        <div class="row">
                            Finished
                        </div>
                    </div>
                </span>
            </div>
        </nav>
        <br>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-3">
                    <div class="mini-submenu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </div>
                    <div class="list-group" style="overflow:auto; height:250px;">
                        <span href="#" class="list-group-item active">
                            MENU
                            <span class="pull-right" id="slide-submenu">
                                <i class="fa fa-times"></i>
                            </span>
                        </span>
                        <a class="list-group-item">
                            <button type="button" onclick="generatePDF()" class="btn btn-link">Save PDF</button>
                        </a>
                        <a class="list-group-item">
                            <button type="button" onclick="getAllCustomSections()" class="btn btn-link">Save Report</button>
                        </a>
                        <a href="#" class="list-group-item">
                            <i class="fa fa-comment-o">{{ loadReport }}</i>
                        </a>
                        <a href="#" class="list-group-item">
                            <i class="fa fa-envelope"></i> Go to Setup
                        </a>
                    </div>      
                </div>
                <div class="col-md-9 overflow-auto">
                    <div class="card">
                        <div class="card-header">Summary</div>
                        <div class="card=body">
                            <div class="container">
                                <div class="row">
                                    <div class="col">
                                        <table id="tablaSummary1">
                                            <tr>
                                                <th>IRACE version: </th>
                                                <td>{{ iraceResults$irace.version }}</td>
                                            </tr>
                                            <tr>
                                                <th>Number of candidate configurations: </th>
                                                <td>{{ nrow(iraceResults$allConfigurations) }}</td>
                                            </tr>
                                            <tr>
                                                <th>Number of target executions: </th>
                                                <td> {{ iraceResults$state$experimentsUsedSoFar }}</td>
                                            </tr>
                                            <tr>
                                                <th>Total time required: </th>
                                                <td>HH:MM:SS</td>
                                            </tr>
                                            <tr>
                                                <th>Elitist new instances: </th>
                                                <td>{{ iraceResults$scenario$elitistNewInstances }}</td>
                                            </tr>
                                            <tr>
                                                <th>Elitist limit: </th>
                                                <td>{{ iraceResults$scenario$elitistLimit }}</td>
                                            </tr>  
                                            <tr>
                                                <th>nbIterations: </th>
                                                <td>{{ iraceResults$state$nbIterations }}</td>
                                            </tr>  
                                        </table>
                                    </div>
                                    <div class="col">
                                        <table id="tablaSummary2">
                                            <tr>
                                                <th>minNbSurvival: </th>
                                                <td>{{ iraceResults$state$minSurvival }}</td>
                                            </tr>
                                            <tr>
                                                <th>nbParameters: </th>
                                                <td>{{ iraceResults$parameters$nbParameters }}</td>
                                            </tr>
                                            <tr>
                                                <th>seed: </th>
                                                <td>{{ iraceResults$scenario$seed }}</td>
                                            </tr>
                                            <tr>
                                                <th>confidence level: </th>
                                                <td>{{ iraceResults$scenario$confidence }}</td>
                                            </tr>
                                            <tr>
                                                <th>budget: </th>
                                                <td>{{  iraceResults$scenario$budgetEstimation }}</td>
                                            </tr>  
                                            <tr>
                                                <th>mu: </th>
                                                <td>{{  iraceResults$scenario$mu }}</td>
                                            </tr>
                                            <tr>
                                                <th>deterministic: </th>
                                                <td>{{  iraceResults$scenario$deterministic }}</td>
                                            </tr>  
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-3">
                    <div class="card">
                        <div class="card-header" align="center">Contents</div>
                        <div class="card=body" style="overflow:auto; height:160px;">
                            <br>
                            <div class="container" align="center">
                                <div class="list-group">
                                    <a href="#summary" class="badge badge-light" style="color: blue; font-size: 18px;">*Summary</a>
                                    <a href="#candidates" class="badge badge-light" style="color: blue; font-size: 18px;">*Candidates</a>
                                    <a href="#perfomance" class="badge badge-light" style="color: blue; font-size: 18px;">*Perfomance</a>
                                    <a href="#details" class="badge badge-light" style="color: blue; font-size: 18px;">*Details</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="card">
                        <div class="card-header" align="center">Sections</div>
                        <div class="card=body" style="overflow:auto; height:160px;">
                            <br>
                            <div class="container" align="center">
                                <div class="list-group" id="sectionsMenu">
                                    <a href="#" class="badge badge-light" style="color: blue; font-size: 18px;">*Main Section</a>
                                </div>
                            </div>
                            <br>
                        </div>
                        <button type="button" class="btn btn-outline-success btn-md" role="button" onclick="createNewSection()">New section</button>
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="card">
                        <div class="card-header" id="bestConfiguration">Best Configuration</div>
                        <div class="card=body">
                            <div class="container" style="overflow:auto; height:500px;">
                                <div class="row">
                                    <div class="col shiny-html-output">
                                        <br>
                                        {{ bestConfiguration }}
                                    </div>
                                    <div class="col">
                                        <br>
                                        <div class="input-group">
                                            <select class="custom-select section" id="bestConfigurationSectionSelect">
                                                <option selected disabled>Select a section to copy Boxplot</option>
                                            </select>
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-primary" type="button" onclick="copyContentIntoSection('bestConfigurationSectionSelect', 'boxPlotBestConfiguration', 'true')">Copy</button>
                                            </div>
                                        </div>
                                        {{ boxPlotBestConfiguration }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header" id="candidates">Candidates</div>
                        <div class="card=body overflow-auto">
                            <br>
                            <div class="container">
                                <div class="row">
                                    <div class="col">
                                        {{ sliderCandidates }}
                                        <br>
                                        <div class="input-group">
                                            <select class="custom-select section" id="candidatesParallelCoordinatesSectionSelect">
                                                <option selected disabled>Select a section to copy Parallel Coordinates</option>
                                            </select>
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-primary" type="button" onclick="copyContentIntoSection('candidatesParallelCoordinatesSectionSelect', 'parallelCoordinatesCandidates', 'true')">Copy</button>
                                            </div>
                                        </div>
                                        {{ parallelCoordinatesCandidates }}
                                    </div>
                                    <div class="col">
                                        <button type="button" class="btn btn-outline-warning btn-lg btn-block" data-toggle="modal" data-target="#parametersModal">
                                            Open parameters selection
                                        </button>
                                        <br>
                                        <div class="input-group">
                                            <select class="custom-select section" id="candidatesFrecuencySectionSelect">
                                                <option selected disabled>Select a section to copy Frequency Plot</option>
                                            </select>
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-primary" type="button" onclick="copyContentIntoSection('candidatesFrecuencySectionSelect', 'frecuencyCandidates', 'true')">Copy</button>
                                            </div>
                                        </div>
                                        {{ frecuencyCandidates }}
                                    </div>
                                </div>
                            </div>
                            <br>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header" id="perfomance">Perfomance</div>
                        <div class="card=body" style="overflow:auto; height:900px;">
                            <br>
                            <div class="container">
                                <div class="row">
                                    <div class="col">
                                        {{ selectIterationPerfomance }}
                                        <br>
                                        <div class="input-group">
                                            <select class="custom-select section" id="covergencePerfomanceSectionSelect">
                                                <option selected disabled>Select a section to copy Convergence Plot</option>
                                            </select>
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-primary" type="button" onclick="copyContentIntoSection('covergencePerfomanceSectionSelect', 'convergencePerfomance', 'true')">Copy</button>
                                            </div>
                                        </div>
                                        {{ convergencePerfomance }}
                                    </div>
                                    <div class="col">
                                        <br>
                                        <br>
                                        <br>
                                        <br>
                                        <div class="input-group">
                                            <select class="custom-select section" id="boxplotPerfomanceSectionSelect">
                                                <option selected disabled>Select a section to copy Boxplot</option>
                                            </select>
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-primary" type="button" onclick="copyContentIntoSection('boxplotPerfomanceSectionSelect', 'boxPlotPerfomance', 'true')">Copy</button>
                                            </div>
                                        </div>
                                        {{ boxPlotPerfomance }}
                                    </div>
                                </div>
                            </div>
                            <br>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-12 overflow-auto">
                    <div class="card">
                        <div class="card-header" id="details">Details by iteration</div>
                        <div class="card=body" style="overflow:auto; height:850px;">
                            <br>
                            <div class="container">
                                <div class="row justify-content-center">
                                    {{ selectDetailsIteration }}
                                </div>
                                <div class="row">
                                    <div class="col shiny-html-output">
                                        {{ selectedIteration }}
                                    </div>
                                </div>
                            </div>
                            <br>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
        </div>
    </body>
    <!-- Modal -->
    <div class="modal fade bd-example-modal-lg" id="parametersModal" tabindex="-1" role="dialog" aria-labelledby="parametersSelection" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Parameters Selection (Only afects Candidates section)</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    {{selectedParametersCandidates}}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</html>
<!-- include customs js -->
<script src="../resources/scripts/main.js" type="text/javascript"></script>
<script src="../resources/scripts/fileExport.js" type="text/javascript"></script>
<script src="../resources/scripts/pdfGen.js" type="text/javascript"></script>
